!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.TabsView=b()}(this,function(){"use strict";function a(a,c,d){c=c||{},d=d||{};var e=document.createElement(a);for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];"$text"!==f?"$html"!==f?e.setAttribute(f,g):e.innerHTML=g:b(e,g)}for(var h=0;h<d.length;h++)e.appendChild(d[h]);return e}function b(a,b){"innerText"in a&&(a.innerText=b),a.textContent=b}function c(a,b,c){return window.addEventListener?a.addEventListener(b,c,!1):window.attachEvent?a.attachEvent("on"+b,function(){var a=window.event;a.target=a.srcElement,c(a)}):void 0}var d=function(a){this.assets={},this._tabs=[],this._tabsById={},this._titleNodeById={},this._paneNodeById={},this._processOptions(a)};return d.prototype.render=function(a){this._isRendered()||(this._initLayout(),this._applyAll(),this._bindEvents());var b=this.assets.main;return a&&a.appendChild(b),b},d.prototype._processOptions=function(a){a=a||{};for(var b=a.tabs||[],c=a.activeTab||!1,d=a.events||{},e=a.renderTo||!1,d=a.events||{},f="function"==typeof d.initTab?d.initTab:!1,g="function"==typeof d.activateTab?d.activateTab:!1,h=0;h<b.length;h++){var i=b[h];this.addTab(i.id,i.title,i.content)}c&&this.activeTab(c),this._vertical=!!a.vertical,f&&(this.__onInitTab=f),g&&(this.__onActivateTab=g),e&&this.render(e)},d.prototype._initLayout=function(){var a=this.assets,b=a.main=this._createMainContainer(),c=a.titles=this._createTitlesContainer(),d=a.panes=this._createPanesContainer();b.appendChild(c),b.appendChild(d)},d.prototype._isRendered=function(){return!!this.assets.main},d.prototype.addTab=function(a,b,c){var d={id:a,title:b,content:c};this._tabs.push(d),this._tabsById[a]=d,this._applyAddTab(d)},d.prototype.removeTab=function(a){for(var b=this._getTab(a),c=-1,d=0;d<this._tabs.length;d++)if(b===this._tabs[d]){c=d;break}this._activeTabId===a&&(1===this._tabs.length?this._removeActivePane():0===c?this.activeTab(this._tabs[1].id):this.activeTab(this._tabs[0].id)),this._tabs.splice(c,1),delete this._tabsById[a],this._applyRemoveTab(a)},d.prototype.activeTab=function(a){if(0===arguments.length)return this._activeTabId;var b=this._activeTabId;this._activeTabId=a,this._applyActiveTab(a,b)},d.prototype.nextTab=function(){var a=this._indexOf(this._activeTabId),b=this._tabs[a+1];b&&this.activeTab(b.id)},d.prototype.prevTab=function(){var a=this._indexOf(this._activeTabId),b=this._tabs[a-1];b&&this.activeTab(b.id)},d.prototype._indexOf=function(a){for(var b=this._getTab(a),c=-1,d=0;d<this._tabs.length;d++)if(b===this._tabs[d]){c=d;break}return c},d.prototype.tabTitle=function(a,b){var c=this._getTab(a);if(1===arguments.length)return c.title;c.title=""+b;var d=this._titleNodeById[a];this._setTitleText(d,b)},d.prototype.tabContent=function(a,b){var c=this._getTab(a);if(1===arguments.length)return c.content;c.content=b;var d=this._paneNodeById[a];this._setPaneContent(d,b)},d.prototype._getTab=function(a){var b=this._tabsById[a];if(!b)throw new Error("Tab not found");return b},d.prototype._createTabTitle=function(b){var c=a("li",{"data-tab-id":b.id},[a("a",{href:"javascript:void(0)","data-tab-id":b.id})]);return this._setTitleText(c,b.title),c},d.prototype._setTitleText=function(a,c){var d=a.firstChild;b(d,c)},d.prototype._setPaneContent=function(a,b){b&&b.nodeType?(a.innerHTML="",a.appendChild(b)):(null===b&&void 0===b&&(b=""),a.innerHTML=b)},d.prototype._createTabPane=function(b){var c=a("div",{"class":"tabs-pane"});return this._setPaneContent(c,b.content),c},d.prototype._createMainContainer=function(){var b="tabs-view tabs-view-horizontal";return this._vertical&&(b="tabs-view tabs-view-vertical"),a("div",{"class":b})},d.prototype._createTitlesContainer=function(){return a("ul",{"class":"tabs clearfix"})},d.prototype._createPanesContainer=function(){return a("div",{"class":"panes"})},d.prototype._applyAddTab=function(a){if(this._isRendered()){var b=this._createTabTitle(a),c=this._createTabPane(a);this.assets.titles.appendChild(b),this._titleNodeById[a.id]=b,this._paneNodeById[a.id]=c}},d.prototype._applyRemoveTab=function(a){this._isRendered()&&(this.assets.titles.removeChild(this._titleNodeById[a]),delete this._titleNodeById[a],delete this._paneNodeById[a])},d.prototype._applyActiveTab=function(a,b){var c=this._getTab(a);if(this._isRendered()&&b!==a){var d=this._titleNodeById[a],e=this._paneNodeById[a];if(void 0!==b){var f=this._titleNodeById[b];f.setAttribute("class","")}d.setAttribute("class","active");var g=this.assets.panes;this._removeActivePane(),g.appendChild(e),this.__onInitTab&&void 0===c.content&&this.__onInitTab.call(this,a,c),this.__onActivateTab&&this.__onActivateTab.call(this,a,c)}},d.prototype._removeActivePane=function(){if(this._isRendered())for(var a=this.assets.panes;a.firstChild;)a.removeChild(a.firstChild)},d.prototype._applyAll=function(){for(var a=this._tabs,b=0;b<a.length;b++){var c=a[b];this._applyAddTab(c)}void 0===this._activeTabId&&(this._activeTabId=a[0].id),this._applyActiveTab(this._activeTabId)},d.prototype._bindEvents=function(){var a=this;c(this.assets.titles,"click",function(b){return a._onTitleClick(b)}),c(this.assets.titles,"mousewheel",function(b){return a._onTitleWheel(b)}),c(this.assets.titles,"DOMMouseScroll",function(b){return a._onTitleWheel(b)})},d.prototype._onTitleWheel=function(a){var b=Math.max(-1,Math.min(1,a.wheelDelta||-a.detail));return a.preventDefault&&a.preventDefault(),a.returnValue=!1,b>0?(this.prevTab(),void 0):(this.nextTab(),void 0)},d.prototype._onTitleClick=function(a){var b=a.target;if(b&&b.hasAttribute("data-tab-id")){var c=b.getAttribute("data-tab-id");this.activeTab(c)}},d.prototype._getTitleElement=function(a){return this._titleNodeById[a]},d.prototype._getPaneElement=function(a){return this._paneNodeById[a]},d});